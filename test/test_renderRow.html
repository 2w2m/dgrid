<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Test renderRow functionality</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
		<meta name="viewport" content="width=570" />
		<style type="text/css">
			@import "../../dojo/resources/dojo.css";
			@import "../css/skins/claro.css";
			body {
				padding: 0 80px; /* side padding to make it easier to scroll doc */
			}
		</style>
		<script type="text/javascript" src="../../dojo/dojo.js" 
			data-dojo-config="async: true"></script>
		<script type="text/javascript">
			var data = [
				{order: 1, name:"preheat", description:"Preheat your oven to 350F"},
				{order: 2, name:"mix dry", description:"In a medium bowl, combine flour, salt, and baking soda"},
				{order: 3, name:"mix butter", description:"In a large bowl, beat butter, then add the brown sugar and white sugar then mix"},
				{order: 4, name:"mix together", description:"Slowly add the dry ingredients from the medium bowl to the wet ingredients in the large bowl, mixing until the dry ingredients are totally combined"},
				{order: 5, name:"chocolate chips", description:"Add chocolate chips"},
				{order: 6, name:"make balls", description:"Scoop up a golf ball size amount of dough with a spoon and drop in onto a cookie sheet"},
				{order: 7, name:"bake", description:"Put the cookies in the oven and bake for about 10-14 minutes"},
				{order: 8, name:"remove", description:"Using a spatula, lift cookies off onto wax paper or a cooling rack"},
				{order: 9, name:"eat", description:"Eat and enjoy!"}
			];
			
			function getOrdinal(num){
				// returns a String consisting of num + the appropriate ordinal suffix
				var ord = 'th';
				switch (num % 10) {
					case 1:
						ord = 'st';
						break;
					case 2:
						ord = 'nd';
						break;
					case 3:
						ord = 'rd';
						break;
				}
				return num + ord;
			}
			
			function testFormatter(item){
				return "<h3>Step " + item.order + ": " + item.name + "</h3><p>" +
					item.description + "</p>";
			}
			
			function testGet(inRowIndex, inItem){
				return getOrdinal(inItem.order);
			}
			
			function testRenderCell(object, data, td, options){
				return getOrdinal(object.order);
			}
			
			var columnsLegacyFormatter = {
				order: {
					name: "Step",
					sortable: false,
					field: "_item",
					formatter: testFormatter
				}
			};
			var columnsLegacyGet = {
				order: {
					name: "Step",
					get: testGet
				},
				name: {},
				description: {name: "what to do", sortable: false}
			};
			var columnsNew = {
				order: {
					name: "Step",
					sortable: false,
					renderCell: testRenderCell
				},
				name: {},
				description: {name: "what to do", sortable: false}
			};
			require(["dgrid/Grid", "dgrid/GridFromHtml", "dojo/domReady!"], function(Grid, GridFromHtml){
				// fully-programmatic tests
				window.gridLegacyFormatter = new Grid({
					columns: columnsLegacyFormatter
				}, "gridLegacyFormatter");
				gridLegacyFormatter.renderArray(data);
				window.gridLegacyGet = new Grid({
					columns: columnsLegacyGet
				}, "gridLegacyGet");
				gridLegacyGet.renderArray(data);
				window.gridNew = new Grid({
					columns: columnsNew
				}, "gridNew");
				gridNew.renderArray(data);
				
				// GridFromHtml tests
				window.gridFromHtmlLegacyFormatter = new GridFromHtml({},
					"gridFromHtmlLegacyFormatter");
				gridFromHtmlLegacyFormatter.renderArray(data);
			});
				
		</script>
	</head>
	<body class="claro">
		<p>This page tests various responsibilities of renderRow in Grid.js.</p>
		<h2>Grid with single column with formatter for _item field (legacy grid behavior)</h2>
		<div id="gridLegacyFormatter"></div>
		<h2>Grid with single column with get for order field (legacy grid behavior)</h2>
		<div id="gridLegacyGet"></div>
		<h2>Grid with single column with renderCell function (dgrid behavior; should look same as previous)</h2>
		<div id="gridNew"></div>
		<hr/>
		<h2>Same 3 tests as above, but using GridFromHtml</h2>
		<!-- GridFromHtml should look for TRs with THs anywhere.
			Testing here with one thead, one tbody, and one implicit. -->
		<table id="gridFromHtmlLegacyFormatter">
			<thead>
				<tr>
					<!--TODO: add sortable="false"-->
					<th field="_item" formatter="testFormatter">Step</th>
				</tr>
			</thead>
		</table>
		<table id="gridFromHtmlLegacyGet">
			<tbody>
				<!--TODO: mimic gridLegacyGet-->
			</tbody>
		</table>
		<table id="gridFromHtmlNew">
			<!--TODO: mimic gridNew-->
		</table>
	</body>
</html>
